Отчёт по Лабораторной работе №6 на тему "КОЛЛЕКЦИИ И НАСЛЕДОВАНИЕ"
Выполнить все задания в одном проекте. В классе могут присутствовать методы со спецификатором
доступа private вспомогательного характера.
В задании 1 необходимо описать класс, который реализует функционал неупорядоченного списка
(обратиться к элементу по индексу нельзя), который может содержать только уникальные элементы
(в случае добавления повторяющихся значений ошибки нет, такой элемент просто не добавляется).
Полем класса является массив. В классе должны присутствовать методы добавления и удаления
элементов, а также методы:
• Union() — объединяет две коллекции;
• Except() — позволяет удалить из первой коллекции элементы второй;
• Intersect() — получает коллекцию, состоящую из элементов, общих для двух коллекций;
• Contains() — проверяет на наличие элемента, возвращает bool.
С помощью данного класса необходимо решить задачу своего варианта.
В задании 2 необходимо описать класс, который реализует функционал словаря (запрещается
использовать готовые решения) и решить задачу своего варианта. В классе должны присутствовать
методы добавления и удаления элементов, учесть, что ключи должны быть уникальными. Исходные
данные содержаться в текстовом файле.
Классы из заданий 1 и 2 должны работать при любом типе данных.
Задание 3 необходимо решить задачу с использованием наследования.
К каждому классу и методу написать xml-документацию.
Необходимо решить по 1 задаче из каждого задания согласно вашему варианту. Задание 1, 2, 3
оцениваются по 2 балла, xml-документация оценивается в 2 балла. Максимально за лабораторную
работу можно получить 10 баллов (8 баллов за решение задач + 2 балла за оформление отчета).

Задание 1. HashSet
Есть перечень музыкальных произведений. Определить для каждого произведения, какие из них
нравятся всем n меломанам, какие — некоторым из меломанов, и какие — никому из меломанов.

Задание 2. Dictionary
Имеется список учеников разных школ, сдававших экзамен по информатике, с указанием их
фамилии, имени, школы и набранного балла. Напишите программу, которая будет определять
номера школ, в которых средний балл выше, чем средний по району. Если такая школа одна,
нужно вывести и средний балл (в следующей строчке). Известно, что информатику сдавали не
менее 5 учеников. Кроме того, школ с некоторыми номерами не существует.
На вход программе в первой строке подается количество учеников списке N. В каждой из
последующих N строк находится информация в следующем формате:
<Фамилия><Имя><Школа><Балл>
где <Фамилия> – строка, состоящая не более, чем из 20 символов без пробелов, <Имя>– строка,
состоящая не более, чем из 20 символов без пробелов, <Школа> – целое число от 1 до 99, <Балл> –
целое число от 1 до 100.
Пример входной строки:
Иванов Сергей 50 87
Пример выходных данных, когда найдено три школы:
50 87 23
Пример вывода в том случае, когда найдена одна школа:
18
Средний балл = 85

Задание 3. Наследование
Автомат. Создайте такой подвид сущности Пистолет из задачи 3.5.1, которая будет совпадать с
ней во всех отношениях, кроме следующего:
• Имеет скорострельность (целое число) которое обозначает количество выстрелов в
секунду, поддерживаемое данным автоматом. Скорострельность всегда положительное
число.
• При вызове Стрелять количество выстрелов соответствует скорострельности (например,
при скорострельности 3 выводится три строки с текстом выстрела).
• Умеет Стрелять N секунд, что приводит к количеству выстрелов равному N умноженное
на скорострельность.
• Инициализация может быть выполнены следующими способами:
a) Без параметров. Скорострельность 30, вместимость 30.
b) С указанием максимального числа патронов. Скорострельность будет равна
половине обоймы
c) С указанием максимального количества патронов в обойме и скорострельности. 


АЛГОРИТМ РЕШЕНИЯ ДЛЯ КАЖДОГО ЗАДАНИЯ:

ЗАДАНИЕ 1: MyHashSet (музыкальные произведения)

1. Реализация шаблонного класса MyHashSet<T>:
   - Использовать вектор для хранения элементов
   - Обеспечить уникальность элементов
   
2. Основные операции:
   a) Добавление элемента:
      1. Проверить, существует ли элемент (findIndex)
      2. Если не существует - добавить в вектор
      3. Вернуть true/false в зависимости от успеха
      
   b) Удаление элемента:
      1. Найти индекс элемента
      2. Удалить из вектора по индексу
      3. Вернуть true/false
      
   c) Проверка наличия:
      1. Линейный поиск по вектору
      2. Вернуть true/false
      
   d) Операции над множествами:
      Union: объединить два множества
      Intersect: найти общие элементы
      Except: найти элементы из A, которых нет в B

3. Применение к музыкальным произведениям:
   - Создать множества любимых треков для каждого меломана
   - Найти: нравятся всем, некоторым, никому

ЗАДАНИЕ 2: Dictionary (анализ школ)

1. Чтение входных данных:
   - Количество учеников N (≥ 5)
   - Для каждого: Фамилия, Имя, Школа (1-99), Балл (1-100)

2. Накопление статистики:
   a) Для каждой школы:
      - Суммировать баллы
      - Подсчитать количество учеников
      
   b) Для района:
      - Общая сумма баллов
      - Общее количество учеников

3. Расчет средних значений:
   - Средний по школе = сумма_баллов / количество_учеников
   - Средний по району = общая_сумма / общее_количество

4. Анализ результатов:
   - Найти школы, где средний > среднего по району
   - Если такая школа одна: вывести номер и средний балл
   - Если несколько: вывести номера через пробел

5. Проверка корректности:
   - Валидация входных данных
   - Обработка ошибок

ЗАДАНИЕ 3: Наследование (пистолет и автомат)
Алгоритм иерархии классов:

1. Базовый класс Gun:
   - Поля: model, maxAmmo, currentAmmo, isLoaded
   - Методы: load(), shoot(), shootMultiple(), displayInfo()

2. Производный класс AssaultRifle:
   - Дополнительное поле: fireRate (скорострельность)
   - Конструкторы:
     a) По умолчанию: fireRate=30, maxAmmo=30
     b) С вместимостью: fireRate = maxAmmo / 2
     c) С вместимостью и скорострельностью
     
   - Переопределенные методы:
     shoot(): производит fireRate выстрелов
     
   - Новый метод:
     shootForSeconds(N): стреляет N секунд

3. Демонстрация полиморфизма:
   - Указатели базового класса на объекты производных
   - Виртуальные методы
   - dynamic_cast для определения типа

СТРУКТУРА КОДА:

ОБЪЕДИНЕННАЯ ПРОГРАММА:
1 ОБЪЯВЛЕНИЕ КЛАССОВ
 1.1. Шаблонный класс MyHashSet<T>
Поля: vector<T> elements, int capacity
Приватные методы: findIndex(), ensureCapacity()
Публичные методы:
   - add(), remove(), contains()
   - Union(), Intersect(), Except()
   - print(), size(), toVector()

 1.2. Классы для Dictionary
 Student (фамилия, имя, школа, балл)
 SchoolStats (сумма баллов, количество)
StudentDictionary (основной класс анализа)

1.3. Классы для наследования
 Gun (базовый класс)
AssaultRifle : public Gun (производный)

2 ФУНКЦИИ ДЕМОНСТРАЦИИ
task1Demo(): демонстрация MyHashSet
task2Demo(): анализ школ
task3Demo(): пистолет и автомат

3 ГЛАВНАЯ ФУНКЦИЯ
Вывод меню
Обработка выбора пользователя
Вызов соответствующих функций

4 ВСПОМОГАТЕЛЬНЫЕ ЭЛЕМЕНТЫ
Включение библиотек
Пространства имен
Константы и макросы

Тесты: 

ТЕСТЫ ДЛЯ ЗАДАНИЯ 1: MyHashSet (музыкальные произведения)
Тест 1.1: Базовые операции добавления и удаления
Цель: Проверить основные операции с целыми числами

Исходные данные:

Создать пустое множество MyHashSet<int>
Добавить элементы: 1, 2, 3, 2 (дубликат)

Действия и ожидаемые результаты:

1. Добавление 1: успешно (true)
2. Добавление 2: успешно (true)  
3. Добавление 3: успешно (true)
4. Добавление 2 (повторно): неуспешно (false) - дубликат
5. Размер множества: 3
6. Проверка contains(2): true
7. Проверка contains(4): false
8. Удаление 2: успешно (true)
9. Размер после удаления: 2
10. Проверка contains(2): false

Тест 1.2: Операции над множествами со строками
Цель: Проверить Union, Intersect, Except

Исходные данные:

Множество A = {"Rock", "Jazz", "Classical"}
Множество B = {"Jazz", "Classical", "Pop"}

Ожидаемые результаты:

1. A ∪ B (Объединение): {"Rock", "Jazz", "Classical", "Pop"}
   Размер: 4 элемента
   
2. A ∩ B (Пересечение): {"Jazz", "Classical"}
   Размер: 2 элемента
   
3. A - B (Разность): {"Rock"}
   Размер: 1 элемент
   
4. B - A (Разность): {"Pop"}
   Размер: 1 элемент

Тест 1.3: Применение к музыкальным предпочтениям
Цель: Определить произведения для меломанов

Исходные данные:

Все произведения: {T1, T2, T3, T4, T5}
Меломан 1 любит: {T1, T2, T3}
Меломан 2 любит: {T2, T3, T4}
Меломан 3 любит: {T3, T4, T5}

Ожидаемые результаты:

1. Нравятся всем (Intersect всех): {T3}
   Размер: 1 произведение

2. Нравятся некоторым (Union всех): {T1, T2, T3, T4, T5}
   Размер: 5 произведений

3. Не нравятся никому (Все - Union): {}
   Размер: 0 произведений

4. Проверка для каждого произведения:
   - T1: нравится только меломану 1
   - T2: нравится меломанам 1 и 2
   - T3: нравится всем трем
   - T4: нравится меломанам 2 и 3
   - T5: нравится только меломану 3

ТЕСТЫ ДЛЯ ЗАДАНИЯ 2: Dictionary (анализ школ)

Тест 2.1: Несколько школ выше среднего
Цель: Правильно определить несколько школ

Входные данные:

Количество учеников: 8

1. Иванов Сергей 50 87
2. Петров Алексей 50 92
3. Сидоров Дмитрий 87 65
4. Смирнов Андрей 23 95
5. Кузнецов Михаил 23 88
6. Попов Иван 50 78
7. Васильев Сергей 87 72
8. Павлов Алексей 18 85

Расчеты:

Школа 50: (87 + 92 + 78) / 3 = 257 / 3 = 85.67
Школа 87: (65 + 72) / 2 = 137 / 2 = 68.50
Школа 23: (95 + 88) / 2 = 183 / 2 = 91.50
Школа 18: 85 / 1 = 85.00

Общий средний:
(87 + 92 + 65 + 95 + 88 + 78 + 72 + 85) / 8 = 662 / 8 = 82.75

Школы выше среднего (82.75):
- Школа 50: 85.67 > 82.75 ✓
- Школа 23: 91.50 > 82.75 ✓
- Школа 18: 85.00 > 82.75 ✓
- Школа 87: 68.50 < 82.75 ✗

Ожидаемый вывод:

50 23 18

Тест 2.2: Одна школа выше среднего
Цель: Правильно определить одну школу

Входные данные:

Количество учеников: 7

1. Иванов Сергей 18 85
2. Петров Алексей 18 90
3. Сидоров Дмитрий 18 80
4. Смирнов Андрей 25 70
5. Кузнецов Михаил 25 65
6. Попов Иван 25 75
7. Васильев Сергей 30 60

Расчеты:

Школа 18: (85 + 90 + 80) / 3 = 255 / 3 = 85.00
Школа 25: (70 + 65 + 75) / 3 = 210 / 3 = 70.00
Школа 30: 60 / 1 = 60.00

Общий средний:
(85 + 90 + 80 + 70 + 65 + 75 + 60) / 7 = 525 / 7 = 75.00

Школы выше среднего (75.00):
- Школа 18: 85.00 > 75.00 ✓
- Школа 25: 70.00 < 75.00 ✗
- Школа 30: 60.00 < 75.00 ✗
Ожидаемый вывод:

18
Средний балл = 85.0

Тест 2.3: Обработка некорректных данных
Цель: Проверить валидацию входных данных

Входные данные:

Количество учеников: 6

1. А Б 0 50      // Ошибка: школа 0 (должна быть 1-99)
2. В Г 101 80    // Ошибка: школа 101
3. Д Е 50 0      // Ошибка: балл 0 (должен быть 1-100)
4. Ж З 50 150    // Ошибка: балл 150
5. И К 50 -5     // Ошибка: балл отрицательный
6. Л М 50 75     // Корректно

Ожидаемое поведение программы:

1. Для строк 1-5: вывод сообщения об ошибке и пропуск ученика
   Пример сообщения: "Ошибка: школа должна быть от 1 до 99"
   Пример сообщения: "Ошибка: балл должен быть от 1 до 100"

2. Обрабатывается только 1 корректный ученик (строка 6)

3. После обработки всех строк:
   - Всего обработано учеников: 1
   - Требуется минимум 5 учеников
   - Вывод: "Недостаточно данных для анализа (требуется минимум 5 учеников)"

4. Статистика:
   - Школа 50: средний 75.00 (1 ученик)
   - Общий средний: 75.00
   - Школ выше среднего: нет

ТЕСТЫ ДЛЯ ЗАДАНИЯ 3: Наследование (пистолет и автомат)

Тест 3.1: Конструкторы автомата
Цель: Проверить все три типа конструкторов

Тест 3.1.1: Конструктор по умолчанию

Создание: AssaultRifle rifle1;

Ожидаемые значения:
- Модель: "Assault Rifle M4"
- Макс. патронов: 30
- Скорострельность: 30 выстр/сек
- Текущие патроны: 0
- Статус: не заряжено

Тест 3.1.2: Конструктор с вместимостью

Создание: AssaultRifle rifle2(40);

Ожидаемые значения:
- Модель: "Assault Rifle"
- Макс. патронов: 40
- Скорострельность: 20 (40 / 2)
- Текущие патроны: 0
- Статус: не заряжено

Тест 3.1.3: Конструктор с параметрами

Создание: AssaultRifle rifle3(50, 15);

Ожидаемые значения:
- Модель: "Assault Rifle"
- Макс. патронов: 50
- Скорострельность: 15
- Текущие патроны: 0
- Статус: не заряжено

Тест 3.1.4: Конструктор с некорректной скорострельностью

Создание: AssaultRifle rifle4(30, -5);

Ожидаемые значения:
- Макс. патронов: 30
- Скорострельность: 1 (исправлено на минимальное)
- Сообщение: "Скорострельность должна быть положительной. Установлено значение 1."

Тест 3.2: Стрельба из автомата
Цель: Проверить методы стрельбы

Исходные условия:

Автомат: вместимость 30, скорострельность 10
Заряжено: 25 патронов
Тест 3.2.1: Одиночный выстрел (shoot)

Действие: rifle.shoot();

Ожидаемый результат:
1. Вывод: "Автоматическая очередь (10 выстр/сек)..."
2. Производится 10 выстрелов (или меньше, если патронов недостаточно)
3. После каждого выстрела: вывод оставшихся патронов
4. После стрельбы: осталось 15 патронов (25 - 10)
5. Статус: заряжено

Тест 3.2.2: Стрельба в течение времени (shootForSeconds)

Действие: rifle.shootForSeconds(2);

Ожидаемый результат:
1. Вывод: "Стрельба в течение 2 секунд (10 выстр/сек) = 20 выстрелов всего..."
2. Производится 15 выстрелов (только 15 патронов осталось)
3. Вывод: "Не удалось произвести все 20 выстрелов. Произведено 15 выстрелов."
4. Осталось патронов: 0
5. Статус: не заряжено
6. Вывод: "Обойма пуста."

Тест 3.2.3: Стрельба при пустом оружии

Действие: rifle.shoot();

Ожидаемый результат:
1. Вывод: "Патроны закончились!" или "Оружие не заряжено!"
2. Никаких выстрелов не производится
3. Статус: не заряжено

Тест 3.2.4: Зарядка сверх вместимости

Действие: rifle.load(40);

Ожидаемый результат:
1. Вывод: "Попытка зарядить 40 патронов, но вместимость только 30."
2. Вывод: "Будет заряжено 30."
3. Текущие патроны: 30 (максимум)
4. Статус: заряжено
Тест 3.3: Полиморфизм и сравнение с пистолетом
Цель: Проверить полиморфное поведение

Исходные условия:

Пистолет: вместимость 15
Автомат: вместимость 30, скорострельность 10
Оба заряжены 15 патронами

Тест 3.3.1: Стрельба одинакового количества раз

Действия:
1. pistol.shootMultiple(5);
2. rifle.shootMultiple(5);

Ожидаемые различия:
Пистолет:
- 5 отдельных выстрелов
- После каждого: вывод "Ба-бах!"
- Время: примерно 5 тактов

Автомат:
- 1 очередь из 5 выстрелов (т.к. fireRate=10, но всего 5 выстрелов)
- Вывод: "Автоматическая очередь (10 выстр/сек)..."
- Все 5 выстрелов в одной очереди
- Время: примерно 1 такт
Тест 3.3.2: Метод, специфичный для автомата

Действие (только для автомата): rifle.shootForSeconds(1);

Ожидаемый результат:
1. Работает только для автомата
2. Для пистолета этот метод недоступен
3. Автомат производит 10 выстрелов (1 сек × 10 выстр/сек)

Тест 3.3.3: Определение типа через dynamic_cast

Действие:
Gun* weapon = new AssaultRifle(30, 10);
AssaultRifle* rifle = dynamic_cast<AssaultRifle*>(weapon);

Ожидаемый результат:
1. Приведение успешно (rifle != nullptr)
2. Через rifle доступен метод shootForSeconds()
3. Через weapon->shoot() вызывается версия из AssaultRifle

Тест 3.3.4: Вывод информации

Действие:
pistol.displayInfo();
rifle.displayInfo();

Ожидаемые различия в выводе:
Пистолет:
- Тип: Пистолет
- Нет информации о скорострельности

Автомат:
- Тип: Автомат
- Скорострельность: 10 выстрелов/сек
- Теоретическая емкость: 3.0 секунд непрерывной стрельбы

ИНТЕГРАЦИОННЫЕ ТЕСТЫ (ВСЯ ПРОГРАММА)

Тест 4.1: Полный цикл работы программы
Цель: Проверить взаимодействие всех компонентов

Последовательность действий:

1. Запуск программы
2. Главное меню → выбор задания 1
3. Проверка вывода демонстрации MyHashSet
4. Возврат в главное меню
5. Главное меню → выбор задания 2
6. Ввод тестовых данных для школ
7. Проверка вывода результатов
8. Возврат в главное меню
9. Главное меню → выбор задания 3
10. Проверка демонстрации наследования
11. Возврат в главное меню
12. Главное меню → выбор 4 (все задания)
13. Проверка последовательного выполнения всех демонстраций
14. Главное меню → выбор 0 (выход)
15. Проверка корректного завершения программы

Ожидаемые результаты:

Все переходы между меню работают корректно

Каждое задание выполняется независимо

Нет конфликтов между классами разных заданий

Память освобождается корректно

Программа завершается без ошибок

Тест 4.2: Обработка некорректного ввода пользователя
Цель: Проверить устойчивость программы

Тест 4.2.1: Некорректный выбор в меню

Действие: В главном меню ввести "999"
Ожидаемый результат: "Неверный выбор. Попробуйте снова."
Программа остается в меню

Тест 4.2.2: Ввод букв вместо чисел

Действие: При запросе количества учеников ввести "abc"
Ожидаемый результат: 
- Сообщение об ошибке
- Повторный запрос ввода
- Программа не падает

Тест 4.2.3: Пустой ввод

Действие: Нажимать Enter без ввода данных
Ожидаемый результат:
- Адекватная обработка (ожидание ввода или сообщение об ошибке)
- Программа не зависает

Тест 4.3: Производительность при больших объемах данных
Цель: Проверить эффективность алгоритмов

Тест 4.3.1: Большое множество (MyHashSet)

Действие: Создать MyHashSet с 10,000 элементов
Ожидаемый результат:
- Добавление всех элементов занимает разумное время
- Операции contains, remove работают корректно
- Память не переполняется

Тест 4.3.2: Много учеников (Dictionary)

Действие: Обработать 1,000 учеников
Ожидаемый результат:
- Расчет средних значений корректен
- Поиск школ выше среднего работает быстро
- Память используется эффективно

Тест 4.3.3: Множество объектов (Наследование)

Действие: Создать 1,000 объектов через полиморфизм
Ожидаемый результат:
- Объекты создаются и удаляются корректно
- Нет утечек памяти
- Виртуальные методы работают правильно для всех объектов
